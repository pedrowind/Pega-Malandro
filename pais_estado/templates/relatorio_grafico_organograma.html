<!DOCTYPE html>
<html lang='pt-BR'>
    <head>
        <meta charset='UTF-8'>
        <title>Relatório em Gráfico de Organograma</title>
        <script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>
        <script type='text/javascript'>
            google.charts.load('current', { packages: ['orgchart'] });
            google.charts.setOnLoadCallback(renderizarGrafico);

            function renderizarGrafico() {
                var dados = new google.visualization.DataTable();
                dados.addColumn('string', 'Nome');
                dados.addColumn('string', 'Herda de');
                dados.addColumn('string', 'ToolTip');

                dados.addRows([
                    [{ v: 'planeta', f: 'Planeta Terra<div style="color: red; font-style: italic">Planeta</div>' }, '', 'O Planeta']

                    {% for dado in dados %}
                        , [{ v: 'pais_{{ dado.identificador_pais }}', f: '{{ dado.nome_pais }}<div style="color: red; font-style: italic">País</div>' }, 'planeta', 'O País']

                        {% for estado in dado.estados %}
                            , [{ v:'estado_{{ estado.identificador_estado }}', f: '{{ estado.nome_estado }}<div style="color: red; font-style: italic">Estado</div>' }, 'pais_{{ dado.identificador_pais }}', 'O Estado']
                        {% endfor %}
                    {% endfor %}
                ]);

                var opcoes = { allowHtml: true };

                var grafico = new google.visualization.OrgChart(document.getElementById('grafico_organograma'));
                grafico.draw(dados, opcoes);
            }
        </script>
    </head>
    <body>
        <h1>Relatório em Gráfico de Organograma</h1>
        <div id='grafico_organograma'></div>
        [ <a href='/'> Retornar ao Menu</a> ]
    </body>
</html>